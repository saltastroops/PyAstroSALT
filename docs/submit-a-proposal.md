from pyastrosalt.submission import submit

# Submit a Proposal

One of the main motivations for PyAstroSALT is the ability to submit SALT proposals (or blocks within a proposal) programmatically.

We assume that you have a file to upload already. (This begs the question of how to create one. We skip that part, as it is difficult at the moment and will be much easier in a forthcoming version of the PIPT.)

The first step is to log in on the SALT server.

```python
from pyastrosalt.auth import login

login(username="john_doe", password="secret")
```

The username and password must be the credentials of a SALT user account, as you would use them for SALT's Principal Investigator Proposal Tool.

Now you can use the `submit` function to submit your proposal file.

```python
from pathlib import Path
from pyastrosalt.submission import submit

path = Path("/path/to/proposal.zip")
submission = submit(proposal_code="2024-2-SCI-054", file=path)
```

Of course, you have to replace "2024-2-SCI-054" with your own proposal code or, if you are submitting a new proposal, with `None`.

The `Submission` instance returned by the `submit` method lets you keep track of the submission by accessing its properties.

Property | Description
--- | ---
error | The error message, if the submission has failed.
log | The full submission log up to now.
proposal_code | The proposal code.
status | The current submission status.

The submission status can have one of three values.

Value | Description
--- | ---
FAILED | The submission has failed with an error and has not completed.
IN_PROGRESS | The submission is ongoing.
SUCCESSFUL | The submission has completed successfully.

The submission log is a list of log entries with the following properties.

Property | Description
--- | ---
logged_at | The datetime when the log entry was generated by the server.
message | The log message.
message_type | The type of messge.

The message type can have one of three values.

Value | Description
--- | ---
error | An error message.
info | An information message, such as that a finder chart is being generated.
warning | A warning indicating that there might be a problem but that the submission proceeded despite the potential issue.

